*{ box-sizing:border-box; }
html, body{ height:100%; }

:root{
  --stage-ratio: 4 / 3;
  --max-w: 980px;
  --pad: 48px;

  /* ✅ 프레임 두께 */
  --outer-frame: 6px;   /* 제일 바깥 “진한 파란” = 얇게 (대략 1/4) */
  --inner-frame: 26px;  /* 연한 하늘색 프레임 = 메인 프레임 */

  --outer-color: rgba(120, 160, 200, 0.65);
  --inner-color: rgba(170, 205, 235, 0.95);

  --shell-radius: 22px;
  --inner-radius: 16px;

  /* 버튼 크기 */
  --ctrl: 18px;
  --ctrl-gap: 10px;

  /* 버튼 위치(프레임 안쪽 여백) */
  --ctrl-pad: 6px;
}

body{
  margin:0;
  overflow:hidden;
  background:#dbeeff;
  font-family: system-ui, -apple-system, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
}

/* BACKGROUND */
.bg{
  position:fixed; inset:0;
  background:
    radial-gradient(1200px 800px at 70% 35%, rgba(255,255,255,0.75), rgba(255,255,255,0) 60%),
    radial-gradient(900px 700px at 25% 45%, rgba(255,255,255,0.55), rgba(255,255,255,0) 55%),
    linear-gradient(180deg, #bfe4ff 0%, #eaf6ff 45%, #ffffff 100%);
  filter:saturate(1.08) contrast(1.05);
}
.vignette{
  position:fixed; inset:0;
  pointer-events:none;
  background: radial-gradient(closest-side, rgba(0,0,0,0) 70%, rgba(0,0,0,0.12) 115%);
  mix-blend-mode:multiply;
}
.scanlines{
  position:fixed; inset:0;
  pointer-events:none;
  opacity:.12;
  background: repeating-linear-gradient(
    to bottom,
    rgba(0,0,0,0.06) 0px,
    rgba(0,0,0,0.06) 1px,
    rgba(255,255,255,0) 3px,
    rgba(255,255,255,0) 6px
  );
}
.noise{
  position:fixed; inset:0;
  pointer-events:none;
  opacity:.08;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  mix-blend-mode:overlay;
}

/* STAGE */
.stage{
  position:fixed; inset:0;
  display:grid;
  place-items:center;
  padding: calc(var(--pad) / 2);
}

/* ✅ window */
.window-shell{
  position:relative;
  width:min(var(--max-w), 92vw, calc((100vh - var(--pad)) * (4/3)));
  aspect-ratio: var(--stage-ratio);
  border-radius: var(--shell-radius);

  /* ✅ 2겹 프레임: 바깥 얇게 + 안쪽 두껍게 */
  border: var(--outer-frame) solid var(--outer-color);
  box-shadow:
    0 0 0 var(--inner-frame) var(--inner-color) inset,
    0 26px 80px rgba(0,0,0,0.22);

  background: rgba(245,250,255,0.25);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  overflow: visible;
}

.window-glow{
  position:absolute; inset:-40%;
  background: radial-gradient(circle at 40% 35%, rgba(255,255,255,0.75), rgba(255,255,255,0) 55%);
  opacity:.85;
  pointer-events:none;
}

/* ✅ inner */
.window-inner{
  position:absolute;
  inset:0;
  border-radius: calc(var(--shell-radius) - 2px);
  overflow:hidden;
}

/* 위 얇은 strip */
.top-strip{
  position:absolute;
  left:0; right:0;
  top:10px;
  height:18px;
  opacity:.32;
  background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(255,255,255,0));
  pointer-events:none;
}

/* ✅ 메인 화면 = 쌩화이트 */
.content{
  position:absolute;
  inset: 14px;
  border-radius: var(--inner-radius);
  background: #ffffff;            /* <- 쌩화이트 */
  border: 1px solid rgba(150,180,210,0.28);
  box-shadow: none;
}

/* ✅ 버튼: 더 우상단 + “연한 하늘색 프레임 안쪽”에 정확히 */
.win-controls{
  position:absolute;
  top: calc(var(--outer-frame) + var(--ctrl-pad));   /* 바깥 테두리 지나서 바로 프레임 안 */
  right: calc(var(--outer-frame) + var(--ctrl-pad));
  display:flex;
  gap: var(--ctrl-gap);
  z-index: 50;
}

.ctrl-btn{
  width: var(--ctrl);
  height: var(--ctrl);
  border-radius: 999px;
  border: 1px solid rgba(0,0,0,0.25);
  background: #fff;
  cursor:pointer;
  box-shadow: 0 1px 0 rgba(255,255,255,.6) inset, 0 1px 2px rgba(0,0,0,.12);
}

/* 색만 남김 */
.ctrl-min{ background:#ffd047; }
.ctrl-max{ background:#58d66a; }
.ctrl-close{ background:#ff5a5a; }

.ctrl-btn:active{ transform: translateY(1px); }

@media (max-width:520px){
  :root{
    --max-w: 520px;
    --inner-frame: 22px;
    --outer-frame: 5px;
    --ctrl: 16px;
    --ctrl-gap: 9px;
    --ctrl-pad: 5px;
  }
}

/* XP popup */
.xp-overlay{
  position:fixed; inset:0;
  display:none;
  place-items:center;
  background:rgba(0,0,0,0.25);
  z-index:9999;
}
.xp-overlay.is-open{ display:grid; }

.xp-window{
  width:min(460px, 92vw);
  background:#cfcfcf;
  border:2px solid #1b1b1b;
  box-shadow:0 12px 50px rgba(0,0,0,.45);
}
.xp-titlebar{
  height:34px;
  background:#0b2e8a;
  color:#fff;
  display:flex;
  align-items:center;
  padding:0 8px;
  gap:10px;
}
.xp-title{ font-weight:700; font-size:13px; text-shadow:0 1px 0 rgba(0,0,0,.4); }
.xp-x{
  margin-left:auto;
  width:26px; height:22px;
  border:1px solid rgba(255,255,255,.55);
  background:#e9e9e9;
  color:#111;
  font-weight:900;
  cursor:pointer;
  display:grid;
  place-items:center;
}
.xp-body{ padding:18px 14px 14px; background:#cfcfcf; }
.xp-message{
  background:#bdbdbd;
  border:1px solid rgba(0,0,0,.45);
  padding:18px 14px;
  margin-bottom:16px;
  color:#111;
  text-transform:lowercase;
  letter-spacing:.6px;
  line-height:1.25;
  font-family: ui-monospace, "Courier New", monospace;
  font-size:14px;
}
.xp-actions{ display:flex; gap:12px; justify-content:center; }
.xp-btn{
  min-width:120px;
  padding:10px 14px;
  background:#dcdcdc;
  border:2px solid #3a3a3a;
  box-shadow:0 2px 0 #ffffff inset;
  cursor:pointer;
  font-size:14px;
}
.xp-btn:active{ transform: translateY(1px); }
.xp-dead{ opacity:.55; cursor:not-allowed; pointer-events:none; }
